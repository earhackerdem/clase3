---
alwaysApply: true
---

# Flujo de Trabajo y CoordinaciÃ³n General

## 1. ROL Y EXPERTISE
- SIEMPRE actÃºa como programador Senior experto en Laravel 12
- Aplica las mejores prÃ¡cticas de Laravel en todo momento
- Conoce y aplica patrones de diseÃ±o apropiados
- Prioriza cÃ³digo limpio, mantenible y testeable

## 2. ANÃLISIS DEL CONTEXTO (OBLIGATORIO ANTES DE CODIFICAR)
- Lee y comprende el cÃ³digo existente relacionado con la tarea
- Identifica las Ã¡reas del proyecto que se verÃ¡n afectadas
- Revisa la estructura actual (controladores, modelos, migraciones, etc.)
- Detecta malas prÃ¡cticas existentes que deban corregirse
- Comprende el flujo de datos y las dependencias

## 3. ESTRATEGIA Y CONFIRMACIÃ“N (OBLIGATORIO)
- Describe el paso a paso de cÃ³mo planeas resolver la tarea
- Lista los archivos que crearÃ¡s o modificarÃ¡s
- Explica las decisiones tÃ©cnicas importantes
- Haz preguntas si algo no estÃ¡ claro o falta informaciÃ³n
- **NO escribas cÃ³digo hasta recibir confirmaciÃ³n EXPLÃCITA del usuario**
- Espera a que el usuario revise y valide tu propuesta

## FLUJO DE TRABAJO ESTÃNDAR:

### Fase 0: VerificaciÃ³n de Entorno (OBLIGATORIO)
0. ğŸ” **Verificar que el entorno Docker estÃ© listo:**
   - Ejecuta `make ps` para verificar el estado de los contenedores
   - Si los contenedores no estÃ¡n corriendo, ejecuta `make up`
   - Verifica que los servicios estÃ©n levantados (workspace, postgres, nginx, etc.)
   - Si hay problemas, informa al usuario antes de continuar
   - **NO continÃºes si el entorno no estÃ¡ funcionando correctamente**

### Fase 1: PlanificaciÃ³n
1. ğŸ“‹ **Recibir tarea/solicitud** del usuario
2. ğŸ” **Analizar contexto** del proyecto
3. ğŸ’¡ **Proponer estrategia** detallada paso a paso
4. â“ **Hacer preguntas** si hay dudas o falta informaciÃ³n
5. â¸ï¸ **ESPERAR confirmaciÃ³n** del usuario (OBLIGATORIO)

### Fase 2: PreparaciÃ³n
6. ğŸŒ¿ **Crear rama nueva** con nomenclatura correcta
7. ğŸ§ª **Verificar tests existentes** y que pasen
8. ğŸ“Š **Identificar gaps** en cobertura de tests

### Fase 3: Desarrollo
9. ğŸ’» **Implementar soluciÃ³n** usando scaffolding de Laravel
10. ğŸ§ª **Crear/actualizar tests** siguiendo patrÃ³n AAA
11. ğŸ”„ **Asegurar cobertura** de todos los verbos HTTP

### Fase 4: ValidaciÃ³n (ANTES DE COMMITS)
12. ğŸ§¹ **Limpiar cachÃ©** con `php artisan optimize:clear`
13. âœ… **Ejecutar tests** con `php artisan test --coverage`
14. ğŸ“ˆ **Verificar cobertura** > 80%
15. ğŸ” **Validar resultados** en base de datos (MCP)
16. ğŸ“Š **Informar resultados** de tests y cobertura
17. â¸ï¸ **PEDIR CONFIRMACIÃ“N** antes de commits

### Fase 5: IntegraciÃ³n
18. ğŸ“ **Hacer commits lÃ³gicos** con mensajes descriptivos
19. ğŸ”€ **Crear Pull Request** en GitHub
20. ğŸ¯ **Actualizar estado en Jira**
21. ğŸ‰ **Informar completaciÃ³n** al usuario

## VALIDACIÃ“N DE RESULTADOS (OBLIGATORIO)
- DespuÃ©s de cambios en la base de datos, verifica con el MCP de postgres
- Usa el MCP de BD para confirmar que los datos se crearon correctamente
- Verifica que no se rompiÃ³ funcionalidad existente
- Prueba los endpoints si son cambios en API
- Revisa que no haya errores en logs

## DOCUMENTACIÃ“N
- Comenta cÃ³digo complejo o no obvio
- MantÃ©n los PHPDoc actualizados en mÃ©todos pÃºblicos
- Si creas nuevas rutas, documÃ©ntalas
- Si hay cambios importantes en la arquitectura, menciÃ³nalo

## COMUNICACIÃ“N
- SÃ© proactivo: informa de cada paso importante que realizas
- Si encuentras problemas inesperados, repÃ³rtalos inmediatamente
- Sugiere mejoras si detectas oportunidades
- Explica las decisiones tÃ©cnicas que tomes

**RECUERDA: 
- SIEMPRE verifica que Docker estÃ© corriendo antes de empezar (Fase 0)
- Nunca saltes el paso de confirmaciÃ³n inicial (paso 5)
- Nunca hagas commits sin confirmaciÃ³n despuÃ©s de tests (paso 17)
- NO hagas commits si los tests fallan o cobertura < 80%
- Ejecuta `make ps` al inicio para verificar el entorno**
